<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conveyor Configurator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="controls-panel">
            <h1>Conveyor Configurator</h1>
            <p class="subtitle">Industrial Design PoC</p>

            <!-- Type Selector -->
            <section class="control-group type-selector">
                <h2>Conveyor Type</h2>
                <div class="type-toggle">
                    <button id="type-roller" class="type-btn active">Roller</button>
                    <button id="type-overhead" class="type-btn">Overhead</button>
                </div>
            </section>

            <!-- Import Section -->
            <section class="control-group import-section">
                <h2>Import</h2>
                <div class="import-buttons">
                    <label class="file-upload-btn">
                        <input type="file" id="csv-upload" accept=".csv" hidden>
                        <span>Load CSV</span>
                    </label>
                    <label class="file-upload-btn">
                        <input type="file" id="cad-upload" accept=".step,.stp,.iges,.igs" hidden>
                        <span>Load CAD</span>
                    </label>
                </div>
                <div id="import-status" class="import-status"></div>
            </section>

            <!-- Roller Conveyor Controls -->
            <section class="control-group roller-only">
                <h2>Dimensions</h2>

                <label>
                    <span>Length (mm)</span>
                    <input type="range" id="length" min="500" max="5000" value="2000" step="100">
                    <output id="length-value">2000</output>
                </label>

                <label>
                    <span>Width (mm)</span>
                    <input type="range" id="width" min="200" max="1500" value="600" step="50">
                    <output id="width-value">600</output>
                </label>

                <label>
                    <span>Height (mm)</span>
                    <input type="range" id="height" min="400" max="1200" value="750" step="50">
                    <output id="height-value">750</output>
                </label>
            </section>

            <section class="control-group roller-only">
                <h2>Rollers</h2>

                <label>
                    <span>Roller Diameter (mm)</span>
                    <input type="range" id="rollerDiameter" min="30" max="100" value="50" step="5">
                    <output id="rollerDiameter-value">50</output>
                </label>

                <label>
                    <span>Roller Spacing (mm)</span>
                    <input type="range" id="rollerSpacing" min="50" max="200" value="100" step="10">
                    <output id="rollerSpacing-value">100</output>
                </label>
            </section>

            <section class="control-group roller-only">
                <h2>Load Capacity</h2>

                <label>
                    <span>Max Load (kg)</span>
                    <select id="loadCapacity">
                        <option value="100">100 kg - Light duty</option>
                        <option value="300" selected>300 kg - Medium duty</option>
                        <option value="500">500 kg - Heavy duty</option>
                        <option value="1000">1000 kg - Extra heavy</option>
                    </select>
                </label>

                <label>
                    <span>Drive Type</span>
                    <select id="driveType">
                        <option value="gravity">Gravity (non-powered)</option>
                        <option value="powered" selected>Powered (motor driven)</option>
                    </select>
                </label>
            </section>

            <section class="control-group specs roller-only">
                <h2>Specifications</h2>
                <div class="spec-grid">
                    <div class="spec">
                        <span class="spec-label">Rollers</span>
                        <span class="spec-value" id="spec-rollers">20</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Frame Weight</span>
                        <span class="spec-value" id="spec-weight">45 kg</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Material</span>
                        <span class="spec-value" id="spec-material">Steel</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Roller Material</span>
                        <span class="spec-value" id="spec-roller-material">Galvanized</span>
                    </div>
                </div>
            </section>

            <!-- Overhead Conveyor Controls -->
            <section class="control-group overhead-only">
                <h2>Track Configuration</h2>

                <label>
                    <span>Track Length (mm)</span>
                    <input type="range" id="trackLength" min="5000" max="30000" value="10000" step="500">
                    <output id="trackLength-value">10000</output>
                </label>

                <label>
                    <span>Height from Floor (mm)</span>
                    <input type="range" id="heightFromFloor" min="2000" max="6000" value="3000" step="100">
                    <output id="heightFromFloor-value">3000</output>
                </label>

                <label>
                    <span>Track Profile</span>
                    <select id="trackProfile">
                        <option value="i-beam" selected>I-Beam Enclosed</option>
                        <option value="box">Box Profile</option>
                        <option value="tube">Tubular</option>
                    </select>
                </label>
            </section>

            <section class="control-group overhead-only">
                <h2>Carriers</h2>

                <label>
                    <span>Carrier Spacing (mm)</span>
                    <input type="range" id="carrierSpacing" min="500" max="3000" value="1000" step="100">
                    <output id="carrierSpacing-value">1000</output>
                </label>

                <label>
                    <span>Number of Carriers</span>
                    <input type="range" id="numCarriers" min="2" max="50" value="10" step="1">
                    <output id="numCarriers-value">10</output>
                </label>

                <label>
                    <span>Load per Carrier (kg)</span>
                    <input type="range" id="loadPerCarrier" min="10" max="200" value="50" step="5">
                    <output id="loadPerCarrier-value">50</output>
                </label>
            </section>

            <section class="control-group overhead-only">
                <h2>Track Layout</h2>

                <label class="checkbox-label">
                    <input type="checkbox" id="includeCurves">
                    <span>Include Curves</span>
                </label>

                <label id="curveRadius-group" style="display: none;">
                    <span>Curve Radius (mm)</span>
                    <input type="range" id="curveRadius" min="300" max="1500" value="500" step="50">
                    <output id="curveRadius-value">500</output>
                </label>

                <label>
                    <span>Incline Angle (deg)</span>
                    <input type="range" id="inclineAngle" min="0" max="30" value="0" step="1">
                    <output id="inclineAngle-value">0</output>
                </label>

                <label>
                    <span>Decline Angle (deg)</span>
                    <input type="range" id="declineAngle" min="0" max="30" value="0" step="1">
                    <output id="declineAngle-value">0</output>
                </label>

                <label>
                    <span>Drive Units</span>
                    <input type="range" id="driveUnits" min="1" max="5" value="1" step="1">
                    <output id="driveUnits-value">1</output>
                </label>
            </section>

            <section class="control-group specs overhead-only">
                <h2>Specifications</h2>
                <div class="spec-grid">
                    <div class="spec">
                        <span class="spec-label">Carriers</span>
                        <span class="spec-value" id="spec-carriers">10</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Total Track</span>
                        <span class="spec-value" id="spec-track-length">10 m</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Est. Weight</span>
                        <span class="spec-value" id="spec-overhead-weight">180 kg</span>
                    </div>
                    <div class="spec">
                        <span class="spec-label">Max Load</span>
                        <span class="spec-value" id="spec-total-load">500 kg</span>
                    </div>
                </div>
            </section>

            <!-- CSV Configurations List -->
            <section class="control-group config-list" id="config-list-section" style="display: none;">
                <h2>Loaded Configurations</h2>
                <select id="config-select" size="4"></select>
                <button id="load-config-btn" class="btn-small">Apply Selected</button>
            </section>

            <div class="actions">
                <button id="export-btn" class="btn-primary">Export STEP File</button>
                <button id="export-csv-btn" class="btn-secondary">Export CSV</button>
                <button id="quote-btn" class="btn-accent">Request Quote</button>
            </div>
        </aside>

        <main class="viewport">
            <canvas id="canvas"></canvas>
            <div class="viewport-controls">
                <span>Drag to rotate | Scroll to zoom</span>
            </div>
            <div id="loading-overlay" class="loading-overlay" style="display: none;">
                <div class="spinner"></div>
                <span>Loading CAD file...</span>
            </div>
        </main>
    </div>

    <!-- Quote Modal -->
    <div id="quote-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <h2>Request a Quote</h2>
            <form id="quote-form">
                <div class="form-group">
                    <label for="company-name">Company Name *</label>
                    <input type="text" id="company-name" required>
                </div>
                <div class="form-group">
                    <label for="contact-name">Contact Name *</label>
                    <input type="text" id="contact-name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone">
                </div>
                <div class="form-group">
                    <label for="quantity">Quantity Needed</label>
                    <input type="number" id="quantity" min="1" value="1">
                </div>
                <div class="form-group">
                    <label for="notes">Additional Notes</label>
                    <textarea id="notes" rows="3"></textarea>
                </div>
                <div class="form-group config-summary">
                    <h3>Configuration Summary</h3>
                    <pre id="config-summary"></pre>
                </div>
                <button type="submit" class="btn-primary">Submit Quote Request</button>
            </form>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="app.js"></script>
</body>
</html>
